<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <!--<meta name="viewport" content="width=device-width, initial-scale=1.0" /> -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Архив моментов</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- Навигационная панель с людьми -->
    <nav class="navbar">
      <div class="nav-container">
        <div class="logo"><a href="index.html">Архив моментов</a></div>
        <div class="people-menu">
          <div class="scroll-indicator">
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-right"></i>
          </div>
          <a href="profiles/Axine.html">
            <div class="person-item">
              <img
                src="img/Axine/AxineProfile.jpg"
                alt="Леша"
                class="person-avatar"
              />
              <span class="person-name">Леша</span>
            </div>
          </a>
          <a href="profiles/Rombaba.html">
            <div class="person-item">
              <img
                src="img/Rombaba/RombabaProfile.jpg"
                alt="Рома"
                class="person-avatar"
              />
              <span class="person-name">Рома</span>
            </div>
          </a>
          <a href="profiles/Stepa.html">
            <div class="person-item">
              <img
                src="img/Stepa/StepaProfile.jpg"
                alt="Стёпа"
                class="person-avatar"
              />
              <span class="person-name">Стёпа</span>
            </div>
          </a>
          <a href="profiles/Geyser.html">
            <div class="person-item">
              <img
                src="img/Geyser/GeyserProfile.jpg"
                alt="Захар"
                class="person-avatar"
              />
              <span class="person-name">Захар</span>
            </div>
          </a>
          <a href="profiles/Bruh.html">
            <div class="person-item">
              <img
                src="img/Bruh/BruhProfile.jpg"
                alt="Паша"
                class="person-avatar"
              />
              <span class="person-name">Паша</span>
            </div>
          </a>
        </div>
      </div>
    </nav>

    <!-- Главный контент -->
    <div class="container">
      <div class="header">
        <h1>Самые яркие моменты</h1>
        <p>Лучшие воспоминания</p>
      </div>

      <div class="moments-grid">
        <!-- Видео-карточка 1 -->
        <div class="moment-card">
          <div class="favorite-badge">
            <i class="fas fa-heart"></i>
          </div>
          <div class="media-container">
            <span class="video-badge">
              <i class="fas fa-video"></i> Видео
            </span>
            <video class="moment-media" poster="img/Rombaba/RombabaMov1.jpg">
              <source src="mov/Rombaba/Rombaba1.mp4" type="video/mp4" />
              Ваш браузер не поддерживает видео.
            </video>
            <div class="media-controls">
              <button class="control-btn play-btn" onclick="togglePlay(this)">
                <i class="fas fa-play"></i>
              </button>
              <button class="control-btn mute-btn" onclick="toggleMute(this)">
                <i class="fas fa-volume-up"></i>
              </button>
            </div>
            <button class="fullscreen-btn" onclick="openFullscreen(this)">
              <i class="fas fa-expand"></i>
            </button>
          </div>
          <div class="moment-info">
            <h3 class="moment-title">Поймали кондиции</h3>
            <span class="moment-date">9 февраля 2025</span>
            <div class="moment-people">
              <span class="moment-person">Рома</span>
            </div>
          </div>
        </div>

        <!-- Видео-карточка 2 -->
        <div class="moment-card">
          <div class="media-container">
            <span class="video-badge">
              <i class="fas fa-video"></i> Видео
            </span>
            <video class="moment-media" poster="img/Stepa/StepaMov1.png">
              <source src="mov/Stepa/Stepa1.mp4" type="video/mp4" />
              Ваш браузер не поддерживает видео.
            </video>
            <div class="media-controls">
              <button class="control-btn play-btn" onclick="togglePlay(this)">
                <i class="fas fa-play"></i>
              </button>
              <button class="control-btn mute-btn" onclick="toggleMute(this)">
                <i class="fas fa-volume-up"></i>
              </button>
            </div>
            <button class="fullscreen-btn" onclick="openFullscreen(this)">
              <i class="fas fa-expand"></i>
            </button>
          </div>
          <div class="moment-info">
            <h3 class="moment-title">Почти стриптиз</h3>
            <span class="moment-date">29 июня 2025</span>
            <div class="moment-people">
              <span class="moment-person">Стёпа</span>
            </div>
          </div>
        </div>
        <!-- Видео-карточка 3 -->
        <div class="moment-card">
          <div class="favorite-badge">
            <i class="fas fa-heart"></i>
          </div>
          <div class="media-container">
            <span class="video-badge">
              <i class="fas fa-video"></i> Видео
            </span>
            <video class="moment-media" poster="img/Geyser/GeyserMov1.png">
              <source src="mov/Geyser/Geyser1.mp4" type="video/mp4" />
              Ваш браузер не поддерживает видео.
            </video>
            <div class="media-controls">
              <button class="control-btn play-btn" onclick="togglePlay(this)">
                <i class="fas fa-play"></i>
              </button>
              <button class="control-btn mute-btn" onclick="toggleMute(this)">
                <i class="fas fa-volume-up"></i>
              </button>
            </div>
            <button class="fullscreen-btn" onclick="openFullscreen(this)">
              <i class="fas fa-expand"></i>
            </button>
          </div>
          <div class="moment-info">
            <h3 class="moment-title">Горячий тверк</h3>
            <span class="moment-date">2 августа 2024</span>
            <div class="moment-people">
              <span class="moment-person">Захар</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Добавьте этот код в ваш существующий script
      document.addEventListener("DOMContentLoaded", function () {
        const peopleMenu = document.querySelector(".people-menu");
        const scrollIndicator = document.querySelector(".scroll-indicator");

        if (peopleMenu && scrollIndicator) {
          // Показываем/скрываем индикатор в зависимости от необходимости скролла
          function updateScrollIndicator() {
            const canScroll = peopleMenu.scrollWidth > peopleMenu.clientWidth;
            scrollIndicator.style.display = canScroll ? "block" : "none";
          }

          // Обновляем при загрузке и изменении размера
          updateScrollIndicator();
          window.addEventListener("resize", updateScrollIndicator);

          // Обработка скролла для изменения индикатора
          peopleMenu.addEventListener("scroll", function () {
            const isEnd =
              peopleMenu.scrollLeft + peopleMenu.clientWidth >=
              peopleMenu.scrollWidth - 10;
            const isStart = peopleMenu.scrollLeft <= 10;

            scrollIndicator.innerHTML = isEnd
              ? '<i class="fas fa-arrow-left"></i>'
              : isStart
              ? '<i class="fas fa-arrow-right"></i>'
              : '<i class="fas fa-arrow-left"></i><i class="fas fa-arrow-right"></i>';
          });
        }
      });
      // Функции для управления видео
      function togglePlay(btn) {
        const video = btn.closest(".media-container").querySelector("video");
        const icon = btn.querySelector("i");

        if (video.paused) {
          video.play();
          icon.classList.remove("fa-play");
          icon.classList.add("fa-pause");
        } else {
          video.pause();
          icon.classList.remove("fa-pause");
          icon.classList.add("fa-play");
        }
      }

      function toggleMute(btn) {
        const video = btn.closest(".media-container").querySelector("video");
        const icon = btn.querySelector("i");

        video.muted = !video.muted;
        icon.classList.toggle("fa-volume-up");
        icon.classList.toggle("fa-volume-mute");
      }

      function openFullscreen(btn) {
        const mediaContainer = btn.closest(".media-container");
        const media = mediaContainer.querySelector("video, img");

        // Выходим из полноэкранного режима, если уже в нем
        if (document.fullscreenElement) {
          if (document.exitFullscreen) {
            document.exitFullscreen();
          }
          return;
        }

        // Входим в полноэкранный режим
        if (media.requestFullscreen) {
          media.requestFullscreen();
        } else if (media.webkitRequestFullscreen) {
          /* Safari */
          media.webkitRequestFullscreen();
        } else if (media.webkitEnterFullscreen) {
          /* iOS Safari */
          media.webkitEnterFullscreen();
        } else if (media.msRequestFullscreen) {
          /* IE11 */
          media.msRequestFullscreen();
        }

        // Для видео показываем стандартные элементы управления
        if (media.tagName === "VIDEO") {
          media.controls = true;

          media.addEventListener("fullscreenchange", function () {
            if (!document.fullscreenElement) {
              media.controls = false;
            }
          });
        }
      }

      document.addEventListener("DOMContentLoaded", function () {
        const peopleMenu = document.querySelector(".people-menu");

        if (peopleMenu) {
          // Проверяем, есть ли горизонтальный скролл
          function checkScroll() {
            const hasScroll = peopleMenu.scrollWidth > peopleMenu.clientWidth;
            peopleMenu.classList.toggle("has-scroll", hasScroll);
          }

          // Проверяем при загрузке и при изменении размера окна
          checkScroll();
          window.addEventListener("resize", checkScroll);
        }
      });
      // Автопауза при скролле (чтобы не играло несколько видео одновременно)
      document.addEventListener("scroll", function () {
        document.querySelectorAll("video").forEach((video) => {
          if (isElementInViewport(video)) return;
          video.pause();
          const playBtn = video
            .closest(".media-container")
            .querySelector(".play-btn i");
          if (playBtn) {
            playBtn.classList.remove("fa-pause");
            playBtn.classList.add("fa-play");
          }
        });
      });

      function isElementInViewport(el) {
        const rect = el.getBoundingClientRect();
        return (
          rect.top >= 0 &&
          rect.left >= 0 &&
          rect.bottom <=
            (window.innerHeight || document.documentElement.clientHeight) &&
          rect.right <=
            (window.innerWidth || document.documentElement.clientWidth)
        );
      }
    </script>
  </body>
</html>
